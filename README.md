# Shut the Box Game with AI, Simulation, and Deep Learning Analysis

## Overview

This project provides a comprehensive environment for playing, simulating, and analyzing strategies for the classic dice game "Shut the Box." It includes a core game engine, multiple AI players with distinct strategies, a simulation framework to test these AIs, and a deep learning component for advanced analysis of game outcomes.

## Features

* **Game Engine (`shut_the_box.py`):**
    * Core logic for playing Shut the Box.
    * Supports human-controlled play (via console input) or AI-controlled simulations.
    * Manages game state, tile removal, dice rolls, and move validation.

* **Multiple AI Strategies (`shut_the_box.py`):**
    * **Random Choice (Strategy 0):** Selects moves randomly.
    * **Single Tile Priority (Strategy 1):** Prioritizes moves matching dice sums or individual dice values.
    * **Maximum Immediate Reward (Strategy 2):** Favors moves that shut down the most tiles.
    * **Tiles of Least Probability (Strategy 3):** Chooses moves based on the lowest probability of recurrence.
    * **Inside Out Logic (Strategy 4):** Prefers tiles closer to the middle of the board.
    * **Outside In Logic (Strategy 5):** Prefers tiles farther from the middle of the board.

* **Simulation Framework (`shut_the_box.py`):**
    * Ability to run multiple games for each AI strategy.
    * Logs game results (score, tiles closed, rolls, moves) to CSV and JSON files.

* **Results Analysis (`analyze_results.py`):**
    * Gathers and combines simulation data from CSV files.
    * Calculates and displays average scores and tiles closed for selected strategies.
    * Generates bar plots for visual comparison of strategy performance.

* **Deep Learning Model (`train_deep_learning_model.py`):**
    * Prepares simulation data for machine learning.
    * Implements a basic neural network using PyTorch.
    * Trains the model to potentially predict or evaluate game outcomes based on historical data.
    * Saves the trained model for future use.

## Getting Started

### Prerequisites

* Python 3.x
* `pandas`
* `matplotlib`
* `numpy`
* `torch`

You can install these dependencies using pip:
```bash
pip install pandas matplotlib numpy torch
```

### Installation

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/your-username/shut-the-box-ai.git](https://github.com/your-username/shut-the-box-ai.git)
    cd shut-the-box-ai
    ```
2.  **Create necessary directories:**
    ```bash
    mkdir -p logs results models
    ```

### How to Run Simulations and Analysis

1.  **Configure Simulation Parameters (`shut_the_box.py`):**
    * Open `shut_the_box.py`.
    * Adjust `NUM_GAMES` to set how many games each strategy will simulate.
    * Modify `STRATEGIES` array to select which AI strategies to run (e.g., `[0,1,2,3,4,5]` for all, or a subset).
    * Set `PLAY_TYPE = 1` for AI control (default for simulations).
    * Save the file.

2.  **Run the Simulation:**
    ```bash
    python shut_the_box.py
    ```
    This will run the simulations and save the results in the `./results/` directory as CSV and JSON files.

3.  **Analyze the Results:**
    * Open `analyze_results.py`.
    * Modify the `strategies` array to select which strategies you want to include in the analysis and visualizations.
    * Ensure `TRAINING_FILE` in `train_deep_learning_model.py` points to a valid JSON results file generated by `shut_the_box.py`.
    * Run the analysis script:
        ```bash
        python analyze_results.py
        ```
    This will print aggregated statistics and display performance plots.

### How to Train the Deep Learning Model

1.  **Ensure Simulation Data Exists:** You must have run `shut_the_box.py` to generate `stb_simple_ai_results_*.json` files in the `./results/` directory.
2.  **Configure Training Parameters (`train_deep_learning_model.py`):**
    * Open `train_deep_learning_model.py`.
    * Update `TRAINING_FILE` to point to the specific JSON results file you want to use for training.
    * Adjust `EPOCHS`, `BATCH_SIZE`, and `LEARNING_RATE` as needed for model training.
    * Save the file.
3.  **Train the Model:**
    ```bash
    python train_deep_learning_model.py
    ```
    The trained model will be saved in the `./models/` directory.

## Project Structure

* `shut_the_box.py`: Main game logic, AI strategies, and game simulation orchestrator.
* `analyze_results.py`: Script for loading, combining, analyzing, and visualizing simulation results.
* `train_deep_learning_model.py`: Defines, trains, and saves a PyTorch deep learning model using simulation data.
* `logs/`: Directory for game and training logs.
* `results/`: Directory for CSV and JSON simulation output files.
* `models/`: Directory for saved deep learning models.

## Future Enhancements (Roadmap)

* **Advanced AI Strategies:** Implement more sophisticated AI algorithms (e.g., Monte Carlo Tree Search, reinforcement learning) for optimal play.
* **Enhanced Data Preprocessing:** Improve feature engineering for the deep learning model.
* **Model Evaluation:** Add metrics and evaluation pipelines for the deep learning model.
* **Interactive UI:** Develop a graphical user interface for playing the game and visualizing simulations in real-time.
* **Parameter Optimization:** Tools for optimizing AI strategy parameters or deep learning hyperparameters.

## Contributing

Contributions are welcome! If you have suggestions for improvements, new features, or find bugs, please open an issue or submit a pull request.

## License

[Choose and add your preferred license here, e.g., MIT, Apache 2.0, etc.]

---
*Remember to save and backup your work after any changes!*
